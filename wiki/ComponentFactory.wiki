To make building JMesa tables easier you can use either the [TableFactory], or the !ComponentFactory. The lower level factory is the !ComponentFactory and will be demonstrated here. I find using a !ComponentFactory most useful when building HTML tables that are more custom. For exports I would recommend using the [TableFactory] because they typically have pretty simple requirements. For more information about components, renderers and editors first read the [View view] overview.

==== HTML Example ====

The following is as an example of what an HTML table would look like:
{{{
public Object htmlTable(WebContext webContext, CoreContext coreContext) {
    HtmlComponentFactory factory = new HtmlComponentFactory(webContext, coreContext);

    // create the table
    HtmlTable table = factory.createTable();
    table.setCaption("Presidents");
    table.getTableRenderer().setWidth("600px");

    // create the row
    HtmlRow row = factory.createRow();
    table.setRow(row);

    // create the editor
    CellEditor editor = factory.createBasicCellEditor();

    // create the columns
    CellEditor customEditor = new PresidentsLinkEditor(editor);
    HtmlColumn firstName = factory.createColumn("firstName", customEditor);
    row.addColumn(firstName);

    HtmlColumn lastName = factory.createColumn("lastName", editor);
    row.addColumn(lastName);

    HtmlColumn term = factory.createColumn("term", editor);
    row.addColumn(term);

    HtmlColumn career = factory.createColumn("career", editor);
    row.addColumn(career);

    // create the view
    ToolbarFactory toolbarFactory = new ToolbarFactoryImpl(table, webContext, coreContext, "csv");
    Toolbar toolbar = toolbarFactory.createToolbar();
    View view = new HtmlView(table, toolbar, coreContext);

    return view.render();
}
}}}

The !PresidentsLinkEditor is an implementation of the !CellEditor and shows what it means to compose the column renderer with a custom cell editor.

{{{
/**
 * Create a link for the first name column. Using the decorator pattern so
 * that can wrap any kind of editor with a link.
 */
private static class PresidentsLinkEditor implements CellEditor {
    CellEditor cellEditor;

    public PresidentsLinkEditor(CellEditor cellEditor) {
        this.cellEditor = cellEditor;
    }

    public Object getValue(Object item, String property, int rowcount) {
        Object value = cellEditor.getValue(item, property, rowcount);
        HtmlBuilder html = new HtmlBuilder();
        html.a().href().quote().append("http://www.whitehouse.gov/history/presidents/").quote().close();
        html.append(value);
        html.aEnd();
        return html.toString();
    }
}
}}}

==== CSV Export Example ====

The following is as an example of what a CSV export table would look like:
{{{
public void csvTable(WebContext webContext, CoreContext coreContext, HttpServletResponse response)
        throws Exception {
    CsvComponentFactory factory = new CsvComponentFactory(webContext, coreContext);

    // create the table
    Table table = factory.createTable();

    // create the row
    Row row = factory.createRow();
    table.setRow(row);

    // create the editor
    CellEditor editor = factory.createBasicCellEditor();

    // create the columns
    Column firstName = factory.createColumn("firstName", editor);
    row.addColumn(firstName);

    Column lastName = factory.createColumn("lastName", editor);
    row.addColumn(lastName);

    Column term = factory.createColumn("term", editor);
    row.addColumn(term);

    Column career = factory.createColumn("career", editor);
    row.addColumn(career);

    // create the view
    CsvView view = new CsvView(table, coreContext);
    ViewExporter exporter = new CsvViewExporter(view, "presidents.txt", response);
    exporter.export();
}
}}}











